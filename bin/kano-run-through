#!/bin/sh

# kano-run-through
#
# Copyright (C) 2014 Kano Computing Ltd.
# License: http://www.gnu.org/licenses/gpl-2.0.txt GNU General Public License v2
#
# A script for going through the initial boot flow
#

./kano-init-flow 0
exit_code=$?

while [ $exit_code -ne 4 ]; do
    
    if [ $exit_code -eq 2 ]; then
       rxvt -title \'WiFi\' -e /usr/bin/kano-wifi
       ./kano-init-flow 2
       exit_code=$?
    fi

    if [ $exit_code -eq 3 ]; then
       sudo kano-updater
       ./kano-init-flow 3
       exit_code=$?
    fi
    
    # If you close window, stops application crashing
    if [ $exit_code -eq 0 ]; then
       exit $?
    fi
    
done

kano-login first_boot
